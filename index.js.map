{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nasync function getImagesByQuery(query, page = 1) {    \n\n    const params = new URLSearchParams({\n        key: \"51330331-9209d844650666afb5a4e1e7c\",\n        q: `${query}`,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 15,\n        page\n});\n    const { data } = await axios.get(`https://pixabay.com/api/?${params}`)\nreturn data;    \n}\n\nexport default getImagesByQuery \n\n// Ця функція повинна приймати один параметр query (пошукове слово, яке є рядком),\n// здійснювати HTTP-запит і повертати значення властивості data з отриманої відповіді.\n \n","import SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\n\nlet gallery = null;\n\nexport function createGallery(images) { \n    const list = document.querySelector(\".gallery\");\n    const markup = images.map(({\n        webformatURL, largeImageURL, tags, likes, views, comments, downloads\n        }) => \n        `<li class=\"card\">            \n                <a href=\"${largeImageURL}\" class=\"largeImage\">\n                    <img src=\"${webformatURL}\" class=\"webFormat\" alt=\"${tags}\" />\n                </a>                        \n                <div class=\"container-lable\">\n                    <div class=\"label\">\n                        <h3 class=\"headrLable\">Likes</h3>\n                        <p class=\"textLable\">${likes}</p>\n                    </div>\n                    <div class=\"label\">\n                        <h3 class=\"headrLable\">Views</h3>\n                        <p class=\"textLable\">${views}</p>\n                    </div>\n                    <div class=\"label\">\n                        <h3 class=\"headrLable\">Comments</h3>\n                        <p class=\"textLable\">${comments}</p>\n                    </div>\n                    <div class=\"label\">\n                        <h3 class=\"headrLable\">Downloads</h3>\n                        <p class=\"textLable\">${downloads}</p>\n                    </div>\n                </div>            \n        </li>`\n    ).join(\"\");    \n    if (list) {\n        list.insertAdjacentHTML(\"beforeend\", markup);\n    } else {\n        alert(\"Елемент галереї не знайдено в DOM\");\n\n    }\n\n    if (!gallery) {\n        gallery = new SimpleLightbox('.card a', {\n            captionsData: 'alt',            \n            captionDelay: 250,        \n        });        \n    } else {\n        gallery.refresh();\n    }\n};\n//Ця функція повинна приймати масив images, створювати HTML - розмітку для галереї,\n//                          додавати її в контейнер галереї та викликати метод екземпляра SimpleLightbox refresh().Нічого не повертає.\n\nexport function clearGallery() {\n    const list = document.querySelector(\".gallery\");\n    if (list) {\n        list.innerHTML = \"\";\n    };\n}; // Ця функція нічого не приймає та повинна очищати вміст контейнера галереї. Нічого не повертає\n\nexport function showLoader() {  \n    const loader = document.querySelector('.loader');\n    if (loader) {\n        loader.classList.remove(\"hidden\");\n    };\n}; // Ця функція нічого не приймає, повинна додавати клас для відображення лоадера. Нічого не повертає.\n\nexport function hideLoader() {\n    const loader = document.querySelector('.loader');\n    if (loader) {\n        loader.classList.add(\"hidden\");\n    };\n}; // Ця функція нічого не приймає, повинна прибирати клас для відображення лоадера. Нічого не повертає.\n\nexport function showLoadMoreButton() {\n    const loadButton = document.querySelector(\".load-button\");\n    if (loadButton) {\n        loadButton.classList.remove(\"load-more-hidden\");        \n    }\n}\n// . Ця функція нічого не приймає, повинна додавати клас для відображення кнопки Load more. Нічого не повертає.\n\nexport function hideLoadMoreButton() {\n    const loadButton = document.querySelector(\".load-button\");\n    if (loadButton) {\n        loadButton.classList.add(\"load-more-hidden\");        \n    }\n} \n// . Ця функція нічого не приймає, повинна прибирати клас для відображення кнопки Load more.Нічого не повертає.","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport getImagesByQuery from \"./js/pixabay-api\"\nimport { createGallery, showLoader, hideLoader, clearGallery, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions\";\n\nconst form = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loadMore = document.querySelector(\".load-button\");  \nlet query = \"\";\nlet page = 1;\nlet totalPages = 0;\nconst limit = 15;\n\nform.addEventListener(\"submit\", async event => {\n  event.preventDefault();\n  const inputText = document.querySelector('input[name=\"search-text\"]');\n  query = inputText.value.trim()\n  page = 1;\n  hideLoadMoreButton();\n  if (!query.trim()) {\n    clearGallery();\n    hideLoadMoreButton();\n    page = 1;\n    return inputText.value = \"\";\n  }\n  clearGallery();  \n  showLoader();\n    try {\n    const { hits = [], totalHits = 0 } = await getImagesByQuery(query, page);\n    \n      if (!hits.length) {\n        iziToast.error({\n          title: 'Error',\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight'\n        });\n        return;\n      }\n      if (hits.length) {\n        createGallery(hits);\n        showLoadMoreButton(); \n      };   \n         \n      totalPages = Math.ceil(totalHits / limit);\n      if (page === totalPages) {  \n        hideLoadMoreButton();        \n        hideLoader();        \n        return iziToast.error({        \n          position: \"topRight\",          \n          message: \"We're sorry, but you've reached the end of search results.\"      \n        });        \n      }   \n        \n    } catch (error) {\n      hideLoadMoreButton();\n      hideLoader();\n    console.error(\"Помилка:\", error);\n    } finally {\n      hideLoader();      \n  };\n  event.target.reset();\n});\n\nloadMore.addEventListener(\"click\", async function () {\n  showLoader();\n  hideLoadMoreButton()\n  page++;  \n  try {\n    const { hits = [], totalHits = 0 } = await getImagesByQuery(query, page);\n    totalPages = Math.ceil(totalHits / limit);    \n\n    if (hits.length) {\n      createGallery(hits);\n    };\n\n    let firstCard;\n    if (gallery && gallery.children[0]) {    \n      firstCard = gallery.children[0];\n      const height = firstCard.getBoundingClientRect().height;\n\n      window.scrollBy({\n        top: height * 2,\n        left: 0,\n        behavior: \"smooth\"\n      });\n    };    \n    if (page === totalPages) {      \n      hideLoadMoreButton();\n      hideLoader();\n      return iziToast.error({\n      position: \"topRight\",\n      message: \"We're sorry, but you've reached the end of search results.\"\n      });      \n    }  \n    \n  } catch (error) { \n    hideLoadMoreButton();\n    hideLoader();    \n    console.log(error.message);    \n    }    \n    hideLoader();    \n    showLoadMoreButton();    \n  });\n"],"names":["getImagesByQuery","query","page","params","data","axios","gallery","createGallery","images","list","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","loader","hideLoader","showLoadMoreButton","loadButton","hideLoadMoreButton","form","loadMore","totalPages","limit","event","inputText","hits","totalHits","iziToast","error","firstCard","height"],"mappings":"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"}
{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nasync function getImagesByQuery(query, page = 1) {    \n\n    const params = new URLSearchParams({\n        key: \"51330331!-9209d844650666afb5a4e1e7c\",\n        q: `${query}`,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 15,\n        page\n});\n    const { data } = await axios.get(`https://pixabay.com/api/?${params}`)\n    console.log(data);    \nreturn data;    \n}\n\nexport default getImagesByQuery \n\n// Ця функція повинна приймати один параметр query (пошукове слово, яке є рядком),\n// здійснювати HTTP-запит і повертати значення властивості data з отриманої відповіді.\n ","import SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst list = document.querySelector(\".gallery\");\nconst loader = document.querySelector('.loader');\n\nexport function createGallery(images) {     \n    const markup = images.map(({\n        webformatURL, largeImageURL, tags, likes, views, comments, downloads\n        }) => \n        `<li class=\"card\">            \n                <a href=\"${largeImageURL}\" class=\"largeImage\">\n                    <img src=\"${webformatURL}\" class=\"webFormat\" alt=\"${tags}\" />\n                </a>                        \n                <div class=\"container-lable\">\n                    <div class=\"label\">\n                        <h3 class=\"headrLable\">Likes</h3>\n                        <p class=\"textLable\">${likes}</p>\n                    </div>\n                    <div class=\"label\">\n                        <h3 class=\"headrLable\">Views</h3>\n                        <p class=\"textLable\">${views}</p>\n                    </div>\n                    <div class=\"label\">\n                        <h3 class=\"headrLable\">Comments</h3>\n                        <p class=\"textLable\">${comments}</p>\n                    </div>\n                    <div class=\"label\">\n                        <h3 class=\"headrLable\">Downloads</h3>\n                        <p class=\"textLable\">${downloads}</p>\n                    </div>\n                </div>            \n        </li>`\n    ).join(\"\");    \n    list.insertAdjacentHTML(\"beforeend\", markup);\n\n    let gallery = new SimpleLightbox('.largeImage', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n    gallery.refresh();\n};\n//Ця функція повинна приймати масив images, створювати HTML - розмітку для галереї,\n//                          додавати її в контейнер галереї та викликати метод екземпляра SimpleLightbox refresh().Нічого не повертає.\n\nexport function clearGallery() {\n    list.innerHTML = \"\";\n}; // Ця функція нічого не приймає та повинна очищати вміст контейнера галереї. Нічого не повертає\n\nexport function showLoader() {    \n    loader.classList.remove(\"hidden\");\n}; // Ця функція нічого не приймає, повинна додавати клас для відображення лоадера. Нічого не повертає.\n\nexport function hideLoader() {\n    loader.classList.add(\"hidden\");\n}; // Ця функція нічого не приймає, повинна прибирати клас для відображення лоадера. Нічого не повертає.\n\n\nexport function showLoadMoreButton() {\n    const loadButton = document.querySelector(\".load-button\");\n    loadButton.classList.replace(\"load-more-hidden\", \"load-more\");\n}\n// . Ця функція нічого не приймає, повинна додавати клас для відображення кнопки Load more. Нічого не повертає.\n\nexport function hideLoadMoreButton() {\n    const loadButton = document.querySelector(\".load-button\");\n    loadButton.classList.replace(\"load-more\", \"load-more-hidden\");\n} \n// . Ця функція нічого не приймає, повинна прибирати клас для відображення кнопки Load more.Нічого не повертає.","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport getImagesByQuery from \"./js/pixabay-api\"\nimport { createGallery, showLoader, hideLoader, clearGallery, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions\";\n\nconst form = document.querySelector(\".form\");\nlet searchText = \"\";\nlet page = 1;\nconst limit = 15;\nconst loadMore = document.querySelector(\".load-button\");\nloadMore.addEventListener(\"click\", async function () {\n  showLoader();\n  hideLoadMoreButton()\n  page++;  \n  try {\n    const data = await getImagesByQuery(searchText, page);\n    const totalPages = Math.ceil(data.totalHits / limit)\n    createGallery(data.hits)\n\n    const card = document.querySelector(\".card\");\n    const cardHeigh = card.getBoundingClientRect().height;\n    window.scrollBy({\n      left: 0,\n      top: cardHeigh * 2,\n      behavior: \"smooth\",\n    });    \n    \n    if (page === totalPages) {\n      hideLoadMoreButton();\n      hideLoader();\n      return iziToast.error({\n      position: \"topRight\",\n      message: \"We're sorry, but you've reached the end of search results.\"\n      });      \n    }\n  } catch (error) {\n        console.log(error.message);        \n  }\n  hideLoader();\n  showLoadMoreButton();\n});\n\n\n\nform.addEventListener(\"submit\", event => {\n  event.preventDefault();\n  const inputText = document.querySelector('input[name=\"search-text\"]');  \n  page = 1;\n  \n  if (inputText.value === \" \" || inputText.value === \"  \") {    \n    event.preventDefault();    \n    return inputText.value = \"\";      \n  }\n  \n  searchText = inputText.value.trim();\n  clearGallery();\n  showLoader();\n  \n  getImagesByQuery(searchText)\n    .then(images => {\n      if (images.length <= 0) {\n        return iziToast.error({\n          title: 'Error',\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight'\n        });\n      }\n      createGallery(images.hits);        \n      showLoadMoreButton();\n      const cardHeigh = form.getBoundingClientRect().height;      \n      window.scrollBy({       \n        left: 0,        \n        top: cardHeigh,              \n        behavior: \"smooth\",\n      \n    });\n    })\n    .catch(error => console.log(\"Помилка:\", error))\n    .finally(() => {\n    hideLoader();\n  })  \n  event.target.reset();  \n});\n"],"names":["getImagesByQuery","query","page","params","data","axios","list","loader","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","searchText","limit","loadMore","totalPages","cardHeigh","iziToast","error","event","inputText"],"mappings":"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"}